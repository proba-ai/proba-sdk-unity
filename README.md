# proba-sdk-unity

Mobile framework for Proba platform.

## Installation

1. Download ***.unitypackage** file from [releases page](https://github.com/proba-ai/proba-sdk-unity) and open it with Unity

## Usage


### Initialization:

At the program start init SDK

```c#
using ProbaSDK;

Proba.Initialize(
    sdkToken: "${YOUR_SDK_TOKEN}", 
    appId: "${YOUR_APP_ID}", 
    deviceId: "${YOUR_DEVICE_ID}", // optional, UUID generated by default
    appsFlyerId: "${YOUR_APPS_FLYER_UID}", // optional, use AppsFlyer.getAppsFlyerId() if AppsFlyer integration is needed
    amplitudeUserId: "${YOUR_AMPL_USER_UID}", // optional, set Amplitude userId if Amplitude integration is needed
    usingShake: false,  // true by default for debug mode, turn it off if you are already using shake motion in your app for other purposes
    debugLogs: true, // false by default. set to true for verbose logging
    defaults: new [] 
    {
        ("${TEST_1_KEY}", "${TEST_1_DEFAULT_VALUE}"),
	    ("${TEST_2_KEY}", "${TEST_2_DEFAULT_VALUE}")
    }),
    deviceProperties: new [] 
    {
        ("${TEST_1_KEY}", "${TEST_1_DEFAULT_VALUE}"),
        ("${TEST_2_KEY}", "${TEST_2_DEFAULT_VALUE}")
    });;
```

### How to fetch known test values that associated with your device?

```c#
private async void FetchDataAsync()
{
    try
    {
        await Proba.FetchAsync();
    }
    catch (Exception e)
    {
        Debug.LogError($"Error fetching data: {e}");
    }
}
```

### How to get the value for a specific test?

```c#
var value = Proba.GetValue("${TEST_KEY}");
```

In case of problems with no internet connection or another, the values obtained in the previous session will be used, or if they are missing, the default values specified during initialization will be used.

### How to get user tests for analytics?

```c#
var experiments = Proba.GetExperiments();

// or if you need additional details for experiments
var experimentsWithDetails = Proba.GetExperimentsWithDetails();

```

Appsflyer users can integrate Proba sdk with analytics as shown below:

```c#
var experiments = Proba.GetExperiments();

// or if you need additional details for experiments
// var experimentsWithDetails = Proba.GetExperimentsWithDetails();

AppsFlyer.setAdditionalData(experiments);
```

Amplitude users can integrate Proba sdk with analytics as shown below:

```c#
var experiments = Proba.GetExperiments();

// or if you need additional details for experiments
// var experimentsWithDetails = Proba.GetExperimentsWithDetails();

var userProperties = experiments.ToDictionary(x => x.Key, x => (object)x.Value);
Amplitude.Instance.setUserProperties(userProperties);
```


### How to debug?

Before debug make sure that debug-mode for your App is turned-on on [settings page](https://platform.Proba.com/ab/settings)

  ![](https://imgproxy.proba.ai/9ACImnEbmsO822dynjTjcC_B8aXzbbpPQsOgop2PlBs//aHR0cHM6Ly9hcHBib29zdGVyLWNsb3VkLnMzLmV1LWNlbnRyYWwtMS5hbWF6b25hd3MuY29tLzk0N2M5NzdmLTAwY2EtNDA1Yi04OGQ4LTAzOTM4ZjY4OTAzYi5wbmc.png)


```c#
Proba.Initialize(
    ...
    debugLogs: true, // false by default. set to true for verbose logging
    ...
   );
        
```

In debug mode you can see all actual tests and check how the user will see each option of the test.
To show the debug activity you just need to turn it on in your personal cabinet and call

```c#
Proba.LaunchDebugMode();
```

By default debug activity will be shown by performing shake motion on your device.


==================================================

You can see the example of usage in `ProbaExample.cs` file in this project.
